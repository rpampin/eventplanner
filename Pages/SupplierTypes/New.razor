@page "/supplier-type"
@using EventPlanner.Models
@using EventPlanner.Data
@inject SupplierTypeService supplierTypeService
@inject NavigationManager NavigationManager

<div class="title-action">
    <MudText Typo="Typo.h2">New Supplier Type</MudText>
    <MudButton Variant="Variant.Text" StartIcon="@Icons.Filled.Close" Color="Color.Transparent" OnClick="Cancel"> Cancel</MudButton>
</div>

<EditForm Model="@obj" OnValidSubmit="Insert">
    <DataAnnotationsValidator />
    <MudCard>
        <MudCardContent>
            <MudTextField Label="Name" @bind-Value="obj.Name" For="@(() => obj.Name)" />
        </MudCardContent>
        <MudCardActions>
            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Success" StartIcon="@Icons.Filled.Save" Class="ml-auto">Save</MudButton>
        </MudCardActions>
    </MudCard>
</EditForm>

@code {
    SupplierType obj = new SupplierType();

    protected async void Insert()
    {
        await supplierTypeService.InsertOne(obj);
        NavigationManager.NavigateTo("supplier-types");
    }

    void Cancel()
        => NavigationManager.NavigateTo("supplier-types", true);

}
